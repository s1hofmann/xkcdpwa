{"version":3,"sources":["components/header/header.js","config.js","components/imageshaker/imageshaker.js","components/viewer/viewer.js","capabilities.js","index.js","register-serviceworker.js"],"names":["Header","react_default","a","createElement","id","src","process","alt","className","React","Component","currentConfig","dataUrl","ImageShaker","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","updateImage","getDataUrl","range","url","Math","floor","random","state","maxComics","currentHistory","history","lastIndex","length","fetchPayload","then","body","setState","concat","currentIndex","fetch","response","json","catch","err","console","log","prev","idx","next","render","currentPayload","img","num","title","onClick","Viewer","header_Header","imageshaker_ImageShaker","capabilities","sw","navigator","idb","window","sync","ReactDOM","viewer_Viewer","document","getElementById","serviceWorker","register","registration"],"mappings":"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","file":"static/js/main.13ee6507.chunk.js","sourcesContent":["import React from \"react\";\nimport './header.css';\n\nexport default class Header extends React.Component {\n    render() {\n        return (\n            <header>\n                <div id={\"headerContainer\"}>\n                    <img src={process.env.PUBLIC_URL + \"/img/logo.png\"} alt={\"Logo\"}/>\n                    <span className={\"title\"}>pwa</span>\n                </div>\n            </header>\n        )\n    }\n}\n","const currentConfig = {\n    dataUrl: \"https://xkcd.now.sh/\"\n};\n\nexport default currentConfig;\n","import React from \"react\";\n\nimport \"./imageshaker.css\";\nimport currentConfig from \"../../config\";\n\nexport default class ImageShaker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [{}],\n      currentIndex: 0\n    };\n    this.fetchPayload(this.getDataUrl()).then(body => {\n      this.setState({\n        history: [body],\n        currentIndex: this.state.history.length - 1,\n        maxComics: body.num\n      });\n    });\n  }\n\n  componentDidMount = () => {\n    this.updateImage();\n  };\n\n  getDataUrl = range => {\n    let url = currentConfig.dataUrl;\n    if (range) {\n      url += Math.floor(Math.random() * (range - 1) + 1);\n    }\n\n    return url;\n  };\n\n  updateImage = () => {\n    const url = this.getDataUrl(this.state.maxComics);\n    const currentHistory = this.state.history;\n    let lastIndex = this.state.history.length - 1;\n\n    this.fetchPayload(url).then(body => {\n      this.setState({\n        history: currentHistory.concat([body]),\n        currentIndex: ++lastIndex\n      });\n    });\n  };\n\n  fetchPayload = url => {\n    return fetch(url)\n      .then(response => response.json())\n      .then(body => body)\n      .catch(err => console.log(err));\n  };\n\n  prev = () => {\n    let idx = this.state.currentIndex;\n    this.setState({\n      currentIndex: --idx\n    });\n  };\n\n  next = () => {\n    let idx = this.state.currentIndex;\n    this.setState({\n      currentIndex: ++idx\n    });\n  };\n\n  render = () => {\n    const currentPayload = this.state.history[this.state.currentIndex];\n\n    console.log(this.state.currentIndex);\n    console.log(this.state.history);\n    return (\n      <div id={\"comicContainer\"}>\n        <div id={\"imageContainer\"}>\n          <img\n            className={\"comic\"}\n            src={currentPayload.img}\n            alt={currentPayload.alt}\n          />\n          <div id={\"comicName\"}>\n            <span>\n              #{currentPayload.num} | {currentPayload.title}\n            </span>\n          </div>\n        </div>\n        <div className={\"buttongroup\"}>\n          {this.state.currentIndex > 1 && (\n            <button onClick={this.prev}>&lt;</button>\n          )}\n          <button id={\"shuffleBtn\"} onClick={this.updateImage}>\n            Get me another one!\n          </button>\n          {this.state.currentIndex < this.state.history.length - 1 && (\n            <button onClick={this.next}>&gt;</button>\n          )}\n          <div className=\"clearer\" />\n        </div>\n      </div>\n    );\n  };\n}\n","import React from \"react\";\nimport Header from '../header/header'\nimport ImageShaker from '../imageshaker/imageshaker';\n\nexport default class Viewer extends React.Component {\n    // constructor(props) {\n    //     super(props);\n    // }\n\n    render() {\n        return (\n            <div>\n                <Header/>\n                <ImageShaker/>\n            </div>\n        );\n    }\n}\n\n","export const capabilities = {\n    sw: 'serviceWorker' in navigator,\n    idb: 'indexedDB' in window || 'mozIndexedDB' in window || 'webkitIndexedDB' in window || 'msIndexedDB' in window,\n    sync: 'serviceWorker' in navigator && 'SyncManager' in window\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport Viewer from './components/viewer/viewer'\nimport \"./index.css\";\nimport registerServiceWorker from './register-serviceworker';\n\n// ========================================\n\nReactDOM.render(<Viewer/>, document.getElementById(\"root\"));\nregisterServiceWorker();\n","import {capabilities} from './capabilities';\n\nexport default function registerServiceWorker() {\n    console.log('Trying to register service worker.');\n    if (capabilities.sw) {\n        navigator.serviceWorker\n            .register(process.env.PUBLIC_URL + '/sw.js')\n            .then(registration => console.log(\"Successfully registered service worker:\", registration))\n            .catch(err => console.log(\"Failed to register service worker:\", err));\n    } else {\n        console.log('Service workers not supported, skipping registration.');\n    }\n}\n"],"sourceRoot":""}